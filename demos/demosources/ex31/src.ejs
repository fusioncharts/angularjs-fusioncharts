<% if(src=== "js") { %>
  var jsonify = res => res.json();
  var dataFetch = fetch(
    'https://s3.eu-central-1.amazonaws.com/fusion.store/ft/data/candlestick-chart-data.json'
  ).then(jsonify);
  var schemaFetch = fetch(
    'https://s3.eu-central-1.amazonaws.com/fusion.store/ft/schema/candlestick-chart-schema.json'
  ).then(jsonify);

  var myApp = angular.module("myApp", ["ng-fusioncharts"]);
  myApp.controller("MyController", ["$scope", function($scope){
    $scope.myDataSource = {
      data: null,
      caption: {
        text: 'Apple Inc. Stock Price'
      },
      yAxis: {
        plot: {
          open: 'Open',
          high: 'High',
          low: 'Low',
          close: 'Close',
          type: 'candlestick'
        },
        title: 'Value'
      }
    };

    Promise.all([dataFetch, schemaFetch]).then(res => {
      const data = res[0];
      const schema = res[1];
      const fusionTable = new FusionCharts.DataStore().createDataTable(
        data,
        schema
      );
      $scope.$apply(function() {
        $scope.myDataSource.data = fusionTable;
      });
    });
  }]);
  <% } else if(src==="html") { %>
  <!-- 
      Include script files in your index.html
      ------------------------------------------
      <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/angular.js/1.7.2/angular.min.js"></script>
      <script type="text/javascript" src="path/to/fusioncharts/fusioncharts.js"></script>
      <script type="text/javascript" src="path/to/fusioncharts/themes/fusioncharts.theme.gammel.js"></script>
      <script type="text/javascript" src="path/to/angularjs-fusioncharts.min.js"></script>
     
      
  -->
  <div ng-app="myApp">
    <div ng-controller="MyController"> 
          <div id="chart-container">
              <!--To get the reference of chart instance listen to initialized event-->
                  <fusioncharts
                    type="timeseries"
                    width="100%"
                    id="id1"
                    height=500
                    dataFormat="json"
                    datasource-dt="myDataSource">
                  </fusioncharts>
          </div></br>
    </div>
  </div>
  <% } else if(src==="schema") { %>
    [
      {
        "name": "Date",
        "type": "date",
        "format": "%Y-%m-%d"
      },
      {
        "name": "Open",
        "type": "number"
      },
      {
        "name": "High",
        "type": "number"
      },
      {
        "name": "Low",
        "type": "number"
      },
      {
        "name": "Close",
        "type": "number"
      },
      {
        "name": "Volume",
        "type": "number"
      }
    ]
  <% } else if(src==="data") { %>
    // A shortened version of the data is given here.
    // Please check the link below to see the complete data:
    // https://s3.eu-central-1.amazonaws.com/fusion.store/ft/data/candlestick-chart-data.json
    [
      [
        "1980-12-12",
        0.513393,
        0.515625,
        0.513393,
        0.513393,
        117258400
      ],
      [
        "1980-12-15",
        0.488839,
        0.488839,
        0.486607,
        0.486607,
        43971200
      ],
      [
        "1980-12-16",
        0.453125,
        0.453125,
        0.450893,
        0.450893,
        26432000
      ],
      [
        "1980-12-17",
        0.462054,
        0.464286,
        0.462054,
        0.462054,
        21610400
      ],
      [
        "1980-12-18",
        0.475446,
        0.477679,
        0.475446,
        0.475446,
        18362400
      ],
      [
        "1980-12-19",
        0.504464,
        0.506696,
        0.504464,
        0.504464,
        12157600
      ],
      [
        "1980-12-22",
        0.529018,
        0.53125,
        0.529018,
        0.529018,
        9340800
      ],
      [
        "1980-12-23",
        0.551339,
        0.553571,
        0.551339,
        0.551339,
        11737600
      ],
      [
        "1980-12-24",
        0.580357,
        0.582589,
        0.580357,
        0.580357,
        12000800
      ],
      [
        "1980-12-26",
        0.633929,
        0.636161,
        0.633929,
        0.633929,
        13893600
      ],
      [
        "1980-12-29",
        0.642857,
        0.645089,
        0.642857,
        0.642857,
        23290400
      ],
      [
        "1980-12-30",
        0.629464,
        0.629464,
        0.627232,
        0.627232,
        17220000
      ],
      [
        "1980-12-31",
        0.611607,
        0.611607,
        0.609375,
        0.609375,
        8937600
      ],
      [
        "1981-01-02",
        0.616071,
        0.620536,
        0.616071,
        0.616071,
        5415200
      ],
      [
        "1981-01-05",
        0.604911,
        0.604911,
        0.602679,
        0.602679,
        8932000
      ],
      [
        "1981-01-06",
        0.578125,
        0.578125,
        0.575893,
        0.575893,
        11289600
      ],
      [
        "1981-01-07",
        0.553571,
        0.553571,
        0.551339,
        0.551339,
        13921600
      ],
      [
        "1981-01-08",
        0.542411,
        0.542411,
        0.540179,
        0.540179,
        9956800
      ],
      [
        "1981-01-09",
        0.569196,
        0.571429,
        0.569196,
        0.569196,
        5376000
      ],
      [
        "1981-01-12",
        0.569196,
        0.569196,
        0.564732,
        0.564732,
        5924800
      ],
      [
        "1981-01-13",
        0.546875,
        0.546875,
        0.544643,
        0.544643,
        5762400
      ],
      [
        "1981-01-14",
        0.546875,
        0.549107,
        0.546875,
        0.546875,
        3572800
      ],
      [
        "1981-01-15",
        0.558036,
        0.5625,
        0.558036,
        0.558036,
        3516800
      ],
      [
        "1981-01-16",
        0.555804,
        0.555804,
        0.553571,
        0.553571,
        3348800
      ],
      [
        "1981-01-19",
        0.587054,
        0.589286,
        0.587054,
        0.587054,
        10393600
      ],
      [
        "1981-01-20",
        0.571429,
        0.571429,
        0.569196,
        0.569196,
        7520800
      ],
      [
        "1981-01-21",
        0.580357,
        0.584821,
        0.580357,
        0.580357,
        3976000
      ],
      [
        "1981-01-22",
        0.587054,
        0.591518,
        0.587054,
        0.587054,
        8887200
      ],
      [
        "1981-01-23",
        0.587054,
        0.589286,
        0.584821,
        0.584821,
        2805600
      ],
      [
        "1981-01-26",
        0.578125,
        0.578125,
        0.575893,
        0.575893,
        6160000
      ],
      [
        "1981-01-27",
        0.575893,
        0.575893,
        0.571429,
        0.571429,
        5924800
      ],
      [
        "1981-01-28",
        0.555804,
        0.555804,
        0.553571,
        0.553571,
        7039200
      ],
      [
        "1981-01-29",
        0.535714,
        0.535714,
        0.533482,
        0.533482,
        10976000
      ],
      [
        "1981-01-30",
        0.508929,
        0.508929,
        0.504464,
        0.504464,
        11547200
      ],
      [
        "1981-02-02",
        0.477679,
        0.477679,
        0.475446,
        0.475446,
        5941600
      ],
      [
        "1981-02-03",
        0.493304,
        0.495536,
        0.493304,
        0.493304,
        4788000
      ],
      [
        "1981-02-04",
        0.511161,
        0.513393,
        0.511161,
        0.511161,
        6966400
      ],
      [
        "1981-02-05",
        0.511161,
        0.515625,
        0.511161,
        0.511161,
        1982400
      ],
      [
        "1981-02-06",
        0.513393,
        0.515625,
        0.513393,
        0.513393,
        3466400
      ],
      [
        "1981-02-09",
        0.491071,
        0.491071,
        0.486607,
        0.486607,
        4188800
      ],
      [
        "1981-02-10",
        0.486607,
        0.488839,
        0.486607,
        0.486607,
        4586400
      ],
      [
        "1981-02-11",
        0.473214,
        0.473214,
        0.470982,
        0.470982,
        3460800
      ],
      [
        "1981-02-12",
        0.46875,
        0.46875,
        0.466518,
        0.466518,
        3640000
      ],
      [
        "1981-02-13",
        0.459821,
        0.459821,
        0.455357,
        0.455357,
        2788800
      ],
      [
        "1981-02-17",
        0.466518,
        0.46875,
        0.466518,
        0.466518,
        3068800
      ],
      [
        "1981-02-18",
        0.486607,
        0.491071,
        0.486607,
        0.486607,
        4810400
      ],
      [
        "1981-02-19",
        0.459821,
        0.459821,
        0.457589,
        0.457589,
        5577600
      ],
      [
        "1981-02-20",
        0.435268,
        0.435268,
        0.433036,
        0.433036,
        6092800
      ],
      [
        "1981-02-23",
        0.439732,
        0.441964,
        0.439732,
        0.439732,
        3528000
      ],
      [
        "1981-02-24",
        0.428571,
        0.428571,
        0.424107,
        0.424107,
        4244800
      ],
      [
        "1981-02-25",
        0.450893,
        0.453125,
        0.450893,
        0.450893,
        4872000
      ],
      [
        "1981-02-26",
        0.457589,
        0.459821,
        0.457589,
        0.457589,
        2710400
      ],
      [
        "1981-02-27",
        0.473214,
        0.477679,
        0.473214,
        0.473214,
        3690400
      ],
      [
        "1981-03-02",
        0.475446,
        0.477679,
        0.475446,
        0.475446,
        2940000
      ],
      [
        "1981-03-03",
        0.470982,
        0.470982,
        0.46875,
        0.46875,
        4043200
      ],
      [
        "1981-03-04",
        0.466518,
        0.466518,
        0.464286,
        0.464286,
        3427200
      ],
      [
        "1981-03-05",
        0.464286,
        0.464286,
        0.462054,
        0.462054,
        1344000
      ],
      [
        "1981-03-06",
        0.462054,
        0.462054,
        0.457589,
        0.457589,
        2900800
      ],
      [
        "1981-03-09",
        0.424107,
        0.424107,
        0.421875,
        0.421875,
        3830400
      ],
      [
        "1981-03-10",
        0.404018,
        0.404018,
        0.401786,
        0.401786,
        7095200
      ],
      [
        "1981-03-11",
        0.390625,
        0.390625,
        0.386161,
        0.386161,
        7464800
      ],
      [
        "2018-09-11",
        218.009995,
        224.300003,
        216.559998,
        223.850006,
        35749000
      ],
      [
        "2018-09-12",
        224.940002,
        225,
        219.839996,
        221.070007,
        49278700
      ],
      [
        "2018-09-13",
        223.520004,
        228.350006,
        222.570007,
        226.410004,
        41706400
      ],
      [
        "2018-09-14",
        225.75,
        226.839996,
        222.520004,
        223.839996,
        31999300
      ],
      [
        "2018-09-17",
        222.149994,
        222.949997,
        217.270004,
        217.880005,
        37195100
      ],
      [
        "2018-09-18",
        217.789993,
        221.850006,
        217.119995,
        218.240005,
        31571700
      ],
      [
        "2018-09-19",
        218.5,
        219.619995,
        215.300003,
        218.369995,
        27123800
      ],
      [
        "2018-09-20",
        220.240005,
        222.279999,
        219.149994,
        220.029999,
        26608800
      ],
      [
        "2018-09-21",
        220.779999,
        221.360001,
        217.289993,
        217.660004,
        96246700
      ],
      [
        "2018-09-24",
        216.820007,
        221.259995,
        216.630005,
        220.789993,
        27693400
      ],
      [
        "2018-09-25",
        219.75,
        222.820007,
        219.699997,
        222.190002,
        24554400
      ],
      [
        "2018-09-26",
        221,
        223.75,
        219.759995,
        220.419998,
        23984700
      ],
      [
        "2018-09-27",
        223.820007,
        226.440002,
        223.539993,
        224.949997,
        30181200
      ],
      [
        "2018-09-28",
        224.789993,
        225.839996,
        224.020004,
        225.740005,
        22929400
      ],
      [
        "2018-10-01",
        227.949997,
        229.419998,
        226.350006,
        227.259995,
        23600800
      ],
      [
        "2018-10-02",
        227.25,
        230,
        226.630005,
        229.279999,
        24788200
      ],
      [
        "2018-10-03",
        230.050003,
        233.470001,
        229.779999,
        232.070007,
        28654800
      ],
      [
        "2018-10-04",
        230.779999,
        232.350006,
        226.729996,
        227.990005,
        32042000
      ],
      [
        "2018-10-05",
        227.960007,
        228.410004,
        220.580002,
        224.289993,
        33580500
      ],
      [
        "2018-10-08",
        222.210007,
        224.800003,
        220.199997,
        223.770004,
        29663900
      ],
      [
        "2018-10-09",
        223.639999,
        227.270004,
        222.25,
        226.869995,
        26891000
      ],
      [
        "2018-10-10",
        225.460007,
        226.350006,
        216.050003,
        216.360001,
        41990600
      ],
      [
        "2018-10-11",
        214.520004,
        219.5,
        212.320007,
        214.449997,
        53124400
      ],
      [
        "2018-10-12",
        220.419998,
        222.880005,
        216.839996,
        222.110001,
        40337900
      ],
      [
        "2018-10-15",
        221.160004,
        221.830002,
        217.270004,
        217.360001,
        30791000
      ],
      [
        "2018-10-16",
        218.929993,
        222.990005,
        216.759995,
        222.149994,
        29184000
      ],
      [
        "2018-10-17",
        222.300003,
        222.639999,
        219.339996,
        221.190002,
        22885400
      ],
      [
        "2018-10-18",
        217.860001,
        219.740005,
        213,
        216.020004,
        32581300
      ],
      [
        "2018-10-19",
        218.059998,
        221.259995,
        217.429993,
        219.309998,
        33078700
      ],
      [
        "2018-10-22",
        219.789993,
        223.360001,
        218.940002,
        220.649994,
        28792100
      ],
      [
        "2018-10-23",
        215.830002,
        223.25,
        214.699997,
        222.729996,
        38767800
      ],
      [
        "2018-10-24",
        222.600006,
        224.229996,
        214.539993,
        215.089996,
        40925500
      ],
      [
        "2018-10-25",
        217.710007,
        221.380005,
        216.75,
        219.800003,
        29855800
      ],
      [
        "2018-10-26",
        215.899994,
        220.190002,
        212.669998,
        216.300003,
        47258400
      ],
      [
        "2018-10-29",
        219.190002,
        219.690002,
        206.089996,
        212.240005,
        45935500
      ],
      [
        "2018-10-30",
        211.149994,
        215.179993,
        209.270004,
        213.300003,
        36660000
      ],
      [
        "2018-10-31",
        216.880005,
        220.449997,
        216.619995,
        218.860001,
        38358900
      ],
      [
        "2018-11-01",
        219.050003,
        222.360001,
        216.809998,
        222.220001,
        58323200
      ],
      [
        "2018-11-02",
        209.550003,
        213.649994,
        205.429993,
        207.479996,
        91328700
      ],
      [
        "2018-11-05",
        204.300003,
        204.389999,
        198.169998,
        201.589996,
        66163700
      ],
      [
        "2018-11-06",
        201.919998,
        204.720001,
        201.690002,
        203.770004,
        31882900
      ],
      [
        "2018-11-07",
        205.970001,
        210.059998,
        204.130005,
        209.949997,
        33424400
      ],
      [
        "2018-11-08",
        209.979996,
        210.119995,
        206.75,
        208.490005,
        25362600
      ],
      [
        "2018-11-09",
        205.550003,
        206.009995,
        202.25,
        204.470001,
        34365800
      ],
      [
        "2018-11-12",
        199,
        199.850006,
        193.789993,
        194.169998,
        51135500
      ],
      [
        "2018-11-13",
        191.630005,
        197.179993,
        191.449997,
        192.229996,
        46882900
      ],
      [
        "2018-11-14",
        193.899994,
        194.479996,
        185.929993,
        186.800003,
        60801000
      ],
      [
        "2018-11-15",
        188.389999,
        191.970001,
        186.899994,
        191.410004,
        46478800
      ],
      [
        "2018-11-16",
        190.5,
        194.970001,
        189.460007,
        193.529999,
        36208500
      ]
    ]
  <% } %>