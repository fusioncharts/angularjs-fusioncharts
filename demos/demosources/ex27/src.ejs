<% if(src=== "js") { %>
  var jsonify = res => res.json();
  var dataFetch = fetch(
    'https://s3.eu-central-1.amazonaws.com/fusion.store/ft/data/column-line-combination-data.json'
  ).then(jsonify);
  var schemaFetch = fetch(
    'https://s3.eu-central-1.amazonaws.com/fusion.store/ft/schema/column-line-combination-schema.json'
  ).then(jsonify);

  var myApp = angular.module("myApp", ["ng-fusioncharts"]);
  myApp.controller("MyController", ["$scope", function($scope){
    // datasource
    $scope.myDataSource = {
      data: null,
      caption: {
        text: 'Web visits & downloads'
      },
      subcaption: {
        text: 'since 2015'
      },
      yAxis: [
        {
          plot: [
            {
              value: 'Downloads',
              type: 'column'
            },
            {
              value: 'Web Visits',
              type: 'line'
            }
          ]
        }
      ]
    };

    Promise.all([dataFetch, schemaFetch]).then(res => {
      const data = res[0];
      const schema = res[1];
      const fusionTable = new FusionCharts.DataStore().createDataTable(
        data,
        schema
      );
      $scope.$apply(function() {
        $scope.myDataSource.data = fusionTable;
      });
    });
  }]);
  <% } else if(src==="html") { %>
  <!-- 
      Include script files in your index.html
      ------------------------------------------
      <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/angular.js/1.7.2/angular.min.js"></script>
      <script type="text/javascript" src="path/to/fusioncharts/fusioncharts.js"></script>
      <script type="text/javascript" src="path/to/fusioncharts/themes/fusioncharts.theme.gammel.js"></script>
      <script type="text/javascript" src="path/to/angularjs-fusioncharts.min.js"></script>
     
      
  -->
  <div ng-app="myApp">
    <div ng-controller="MyController"> 
          <div id="chart-container">
              <!--To get the reference of chart instance listen to initialized event-->
                  <fusioncharts
                    type="timeseries"
                    width="100%"
                    id="id1"
                    height=500
                    dataFormat="json"
                    datasource-dt="myDataSource">
                  </fusioncharts>
          </div></br>
    </div>
  </div>
  <% } else if(src==="schema") { %>
    [
      {
        "name": "Time",
        "type": "date",
        "format": "%e-%b-%Y"
      },
      {
        "name": "Downloads",
        "type": "number"
      },
      {
        "name": "Web Visits",
        "type": "number"
      }
    ]
  <% } else if(src==="data") { %>
    // A shortened version of the data is given here.
    // Please check the link below to see the complete data:
    // https://s3.eu-central-1.amazonaws.com/fusion.store/ft/data/column-line-combination-data.json
    [
      [
        "01-Jan-2015",
        "55",
        "100"
      ],
      [
        "02-Jan-2015",
        "56",
        "106"
      ],
      [
        "03-Jan-2015",
        "59",
        "108"
      ],
      [
        "04-Jan-2015",
        "50",
        "102"
      ],
      [
        "05-Jan-2015",
        "56",
        "108"
      ],
      [
        "06-Jan-2015",
        "48",
        "100"
      ],
      [
        "07-Jan-2015",
        "45",
        "97"
      ],
      [
        "08-Jan-2015",
        "56",
        "105"
      ],
      [
        "09-Jan-2015",
        "44",
        "95"
      ],
      [
        "10-Jan-2015",
        "48",
        "96"
      ],
      [
        "11-Jan-2015",
        "52",
        "104"
      ],
      [
        "12-Jan-2015",
        "59",
        "112"
      ],
      [
        "13-Jan-2015",
        "62",
        "118"
      ],
      [
        "14-Jan-2015",
        "56",
        "114"
      ],
      [
        "15-Jan-2015",
        "59",
        "115"
      ],
      [
        "16-Jan-2015",
        "64",
        "125"
      ],
      [
        "17-Jan-2015",
        "61",
        "122"
      ],
      [
        "18-Jan-2015",
        "65",
        "127"
      ],
      [
        "19-Jan-2015",
        "59",
        "126"
      ],
      [
        "20-Jan-2015",
        "75",
        "138"
      ],
      [
        "21-Jan-2015",
        "58",
        "124"
      ],
      [
        "22-Jan-2015",
        "72",
        "134"
      ],
      [
        "23-Jan-2015",
        "64",
        "132"
      ],
      [
        "24-Jan-2015",
        "75",
        "143"
      ],
      [
        "25-Jan-2015",
        "66",
        "133"
      ],
      [
        "26-Jan-2015",
        "70",
        "134"
      ],
      [
        "27-Jan-2015",
        "64",
        "133"
      ],
      [
        "28-Jan-2015",
        "63",
        "128"
      ],
      [
        "29-Jan-2015",
        "69",
        "135"
      ],
      [
        "30-Jan-2015",
        "62",
        "129"
      ],
      [
        "31-Jan-2015",
        "71",
        "136"
      ],
      [
        "01-Feb-2015",
        "76",
        "148"
      ],
      [
        "02-Feb-2015",
        "85",
        "156"
      ],
      [
        "03-Feb-2015",
        "86",
        "156"
      ],
      [
        "04-Feb-2015",
        "86",
        "169"
      ],
      [
        "05-Feb-2015",
        "93",
        "180"
      ],
      [
        "06-Feb-2015",
        "95",
        "185"
      ],
      [
        "07-Feb-2015",
        "100",
        "189"
      ],
      [
        "08-Feb-2015",
        "103",
        "194"
      ],
      [
        "09-Feb-2015",
        "96",
        "193"
      ],
      [
        "10-Feb-2015",
        "82",
        "174"
      ],
      [
        "11-Feb-2015",
        "97",
        "183"
      ],
      [
        "12-Feb-2015",
        "79",
        "175"
      ],
      [
        "13-Feb-2015",
        "74",
        "161"
      ],
      [
        "14-Feb-2015",
        "67",
        "149"
      ],
      [
        "15-Feb-2015",
        "76",
        "150"
      ],
      [
        "16-Feb-2015",
        "68",
        "144"
      ],
      [
        "17-Feb-2015",
        "76",
        "147"
      ]
    ]
  <% } %>